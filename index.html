<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Orologio 06:00→23:00 — ciclo 4 minuti</title>
<style>
  :root{
    --clock-color: #ffffff;
    --phase-name-color: rgba(255,255,255,0.9);
  }

  html,body{
    height:100%;
    margin:0;
    font-family: "Inter", "Helvetica Neue", Arial, sans-serif;
    background: #000;
    overflow: hidden;
  }

  .wrap{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:48px;
    box-sizing:border-box;
    position:relative;
    overflow:hidden;
  }

  .panel{
    width:100%;
    max-width:900px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:24px;
    position: relative;
    z-index: 2;
  }

  .clock {
    font-variant-numeric: tabular-nums;
    font-weight:600;
    color:var(--clock-color);
    font-size:88px;
    letter-spacing:2px;
    line-height:0.95;
  }

  @media (max-width:640px){
    .clock{ font-size:56px; }
  }

  .meta {
    text-align:right;
    color:var(--phase-name-color);
    min-width:220px;
  }

  .meta .phase {
    font-size:18px;
    font-weight:600;
    letter-spacing:1px;
    margin-bottom:10px;
  }
  .meta .time-virtual {
    font-size:14px;
    opacity:0.95;
    margin-bottom:6px;
  }
  .meta .hint {
    font-size:12px;
    opacity:0.75;
  }

  /* immagini sfondo */
  .bg-img{
    position:absolute;
    inset:0;
    z-index:-3;
    background-size:cover;
    background-position:center;
    transition: background-image 1s linear;
  }

  /* overlay filtro colore dinamico */
  .bg-filter{
    position:absolute;
    inset:0;
    z-index:-2;
    pointer-events:none;
    mix-blend-mode: overlay;
    opacity:0.5;
    background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.1), transparent 60%);
    animation: aurora 10s infinite alternate;
  }

  @keyframes aurora{
    0% { background-position: 30% 30%; }
    50% { background-position: 70% 50%; }
    100% { background-position: 50% 70%; }
  }

  .footer-note{
    position: absolute;
    left:12px;
    bottom:10px;
    color: rgba(255,255,255,0.6);
    font-size:12px;
    letter-spacing:1px;
    z-index:2;
  }

  .clock, .meta{ user-select:none; }

</style>
</head>
<body>
  <div class="wrap" id="wrap">
    <div class="bg-img" id="bgImg" aria-hidden="true"></div>
    <div class="bg-filter" id="bgFilter" aria-hidden="true"></div>

    <div class="panel" role="main" aria-live="polite">
      <div class="clock" id="clock" aria-label="orologio virtuale">06:00</div>
      <div class="meta">
        <div class="phase" id="phase">DAWN</div>
        <div class="time-virtual" id="vtime">06:00:00</div>
        <div class="hint">Ciclo 4 minuti — 06:00 → 23:00</div>
      </div>
    </div>

    <div class="footer-note">Minimal day-cycle • 4:00 min loop</div>
  </div>

<script>
const CYCLE_MS = 240000; // 4 minuti
const VIRTUAL_START_HOUR = 6;
const VIRTUAL_TOTAL_SECONDS = (23 - 6) * 3600;

const wrap = document.getElementById('wrap');
const bgImg = document.getElementById('bgImg');
const bgFilter = document.getElementById('bgFilter');
const clockEl = document.getElementById('clock');
const vtimeEl = document.getElementById('vtime');
const phaseEl = document.getElementById('phase');

let cycleStart = performance.now();

const PHASES = [
  { name:'DAWN', startH:6, endH:10, img:'dawn.jpg', color:'#FFB2A0' },
  { name:'MIDDAY', startH:10,endH:14,img:'midday.jpg', color:'#A0D4FF' },
  { name:'AFTERNOON', startH:14,endH:18,img:'afternoon.jpg', color:'#FFAA4D' },
  { name:'SUNSET_TWILIGHT', startH:18,endH:23,img:'sunset.jpg', color:'#2C3A70' }
];

function getVirtualSeconds(elapsedMs){
  const fraction = (elapsedMs % CYCLE_MS) / CYCLE_MS;
  return Math.round(fraction * VIRTUAL_TOTAL_SECONDS);
}

function getPhaseInfo(hh, mm, ss){
  const time = hh + mm/60 + ss/3600;
  for(let p of PHASES){
    if(time >= p.startH && time < p.endH){
      const phaseLen = p.endH - p.startH;
      const local = (time - p.startH)/phaseLen;
      return { phase: p, progress: local };
    }
  }
  return { phase: PHASES[PHASES.length-1], progress:1 };
}

let lastTime = performance.now();
function tick(now){
  const elapsed = now - cycleStart;
  const vSec = getVirtualSeconds(elapsed);
  const totalVirtual = VIRTUAL_START_HOUR*3600 + vSec;
  const hh = Math.floor(totalVirtual/3600)%24;
  const mm = Math.floor((totalVirtual%3600)/60);
  const ss = Math.floor(totalVirtual%60);

  const pad = n => (n<10?'0':'')+n;
  clockEl.textContent = `${pad(hh)}:${pad(mm)}`;
  vtimeEl.textContent = `${pad(hh)}:${pad(mm)}:${pad(ss)}`;

  const {phase, progress} = getPhaseInfo(hh, mm, ss);
  phaseEl.textContent = phase.name;

  // aggiorna immagine di sfondo e colore overlay
  bgImg.style.backgroundImage = `url('${phase.img}')`;
  // colore dinamico con piccole oscillazioni per movimento tipo aurora
  const t = (performance.now()%5000)/5000; // 0-1
  const colorOsc = `rgba(${Math.floor(parseInt(phase.color.slice(1,3),16)*(0.8+0.2*Math.sin(t*6.28)))}, 
                        ${Math.floor(parseInt(phase.color.slice(3,5),16)*(0.8+0.2*Math.sin(t*5.28)))}, 
                        ${Math.floor(parseInt(phase.color.slice(5,7),16)*(0.8+0.2*Math.sin(t*7.28)))}, 0.3)`;
  bgFilter.style.background = `radial-gradient(circle at ${30+40*progress}% ${30+40*progress}%, ${colorOsc}, transparent 70%)`;

  // aggiorna colori testo
  document.documentElement.style.setProperty('--clock-color', '#FFF');
  document.documentElement.style.setProperty('--phase-name-color', 'rgba(255,255,255,0.9)');

  requestAnimationFrame(tick);
}

requestAnimationFrame(tick);

// click per resettare ciclo
wrap.addEventListener('click', ()=>{ cycleStart = performance.now(); });

</script>
</body>
</html>
